<div class="request-list">
    <h1>Mis Solicitudes</h1>
    <div *ngFor="let request of rentalRequests" class="request-card card" [@fadeIn]>
      <h2>{{ request.property.name }}</h2>
      <p><strong>Fecha inicial:</strong> {{ request.startDate | date }}</p>
      <p><strong>Fecha final:</strong> {{ request.endDate | date }}</p>
      <p><strong>Cantidad de personas:</strong> {{ request.guestCount }}</p>
      <p><strong>Estado:</strong> <span [class]="'status ' + request.status">{{ request.status }}</span></p>
      <button *ngIf="request.status === 'completed' && !request.tenantRated" (click)="openRatingModal(request)" class="btn-secondary">Calificar Arrendatario</button>
    </div>
  </div>

  <div *ngIf="showRatingModal" class="modal" [@fadeIn]>
    <div class="modal-content">
      <h2>Calificar Arrendatario</h2>
      <form (ngSubmit)="submitRating()">
        <div class="form-group">
          <label for="rating">Calificación:</label>
          <select id="rating" name="rating" [(ngModel)]="rating.score" required>
            <option value="1">1 - Muy malo</option>
            <option value="2">2 - Malo</option>
            <option value="3">3 - Regular</option>
            <option value="4">4 - Bueno</option>
            <option value="5">5 - Excelente</option>
          </select>
        </div>
        <div class="form-group">
          <label for="comment">Comentario:</label>
          <textarea id="comment" name="comment" [(ngModel)]="rating.comment" required></textarea>
        </div>
        <div class="button-group">
          <button type="submit" class="btn-primary">Enviar Calificación</button>
          <button type="button" (click)="closeRatingModal()" class="btn-secondary">Cancelar</button>
        </div>
      </form>
    </div>
  </div>